<launch>
	<arg name="filename"/>
	
	<node name="pose_saver" pkg="trajectory_analysis" type="slam_an.py">
	</node>
	<!-- Start Mapper to genreate map from laser scans -->
	<node name="Mapper" pkg="nav2d_karto" type="mapper" output="screen">  
	<remap from="scan" to="base_scan2"/> 
	<!-- <rosparam file="$(find nav2d_tutorials)/param/mapper_indoor.yaml"/> -->
    <rosparam file="$(find nav2d_tutorials)/param/mapper.yaml"/>
    <!-- <rosparam file="$(find nav2d_tutorials)/param/zena3_r0 copy.yaml"/> -->
	</node>
	
	<!--rosbag play-->
	


    <node pkg="rosbag" type="play" name="player0" args="--clock -r 1 -s 0 $(find nav2d_tutorials)/launch/bag_files/timed_r0.bag" required="true"> 
	</node>

	<!-- <node name="Input" pkg="keyboard" type="keyboard">
    </node>		  -->
	<node name="dist_service" pkg="service_node" type="service_class.py" output="screen">
	</node>

    <include file="$(find rviz_camera_stream)/launch/demo.launch" />


	

	<node name="bag_parser" pkg="recognition" type="parse_bag.py" args="$(arg filename)" output="screen">
	</node>

	<node name="word_to_index" pkg="recognition" type="word2index.py" output="screen">
	</node>

	<!-- <node name="to_compressed" pkg="image_transport" type="republish" args="raw in:=/rviz1/camera1/image compressed out:=/compressed_img">
	</node> -->

	<node name="RVIZ" pkg="rviz" type="rviz" args=" -d $(find nav2d_tutorials)/param/tutorial3.rviz" />  

	<node name="broadcaster" pkg="pose_to_tftf" type="tf_node">
		<remap from="odompose" to="body_pose"/> 
		<remap from="headpose" to="head_pose" />
		<remap from="base_scan" to="odomscan"/>
	</node>  



</launch>
